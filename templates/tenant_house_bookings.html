{% extends "base.html" %}
{% block content %}
  <h2>ðŸ“š My Bookings</h2>

  {% if bookings %}
    <ul>
      {% for booking in bookings %}
        <li>
          <strong>{{ booking.room.house.title }}</strong><br>
          Room: {{ booking.room.name }}<br>
          Location: {{ booking.room.house.location }}<br>
          Price: KES {{ booking.room.price }}<br>
          Status: <strong>{{ booking.status|capfirst }}</strong><br>
          Move-in Date: {{ booking.move_in_date }}<br>
          Date Booked: {{ booking.created_at|date:"F j, Y, g:i a" }}<br>

          {% if booking.status != 'cancelled' and booking.move_in_date > today %}
            <form method="post" action="{% url 'cancel_booking' booking.id %}">
              {% csrf_token %}
              <button class="cancel-btn">Cancel Booking</button>
            </form>
          {% elif booking.status == 'cancelled' %}
            <span style="color: red;">Booking Cancelled</span>
          {% else %}
            <span style="color: gray;">Cannot cancel (past move-in date)</span>
          {% endif %}
        </li>
        <hr>
      {% endfor %}
    </ul>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
{% endblock %}
<style>
.cancel-btn {
  background-color: #dc3545;
  color: white;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  margin-top: 8px;
  cursor: pointer;
}

.cancel-btn:hover {
  background-color: #c82333;
}
</style>
