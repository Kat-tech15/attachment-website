{% extends "base.html" %}
{% block content %}
  <h2>ðŸ“š My Bookings</h2>

  {% if bookings %}
    <ul class="booking-list">
      {% for booking in bookings %}
        <li class="booking-item">
          <strong>{{ booking.house_post.title }}</strong><br>
           Room: {{ booking.room.room_name }}<br>
           Location: {{ booking.house_post.location }}<br>
           Price: KES {{ booking.house_post.rent }}<br>
            Status:
            <span class="badge {% if booking.status == 'cancelled' %}badge-cancelled{% else %}badge-active{% endif %}">
            {{ booking.house_post.status|capfirst }}
            </span><br>
           Move-in Date: {{ booking.move_in_date }}<br>
           Date Booked: {{ booking.move_in_date|date:"M d, Y" }}<br>

          {% if booking.status != 'cancelled' and booking.move_in_date > today %}
            <form method="post" action="{% url 'cancel_booking' booking.id %}">
              {% csrf_token %}
              <button class="cancel-btn">Cancel Booking</button>
            </form>
          {% elif booking.status == 'cancelled' %}
            <span style="color: red;">Booking Cancelled</span>
          {% else %}
            <span style="color: gray;">Cannot cancel (past move-in date)</span>
          {% endif %}
        </li>
        <hr>
      {% endfor %}
    </ul>
  {% else %}
    <p>No bookings found.</p>
  {% endif %}
{% endblock %}
<style>
.booking-list {
    margin-top: 120px;
  list-style: none;
  padding: 0;
  max-width: 700px;
  margin: 0 auto;
}

.booking-item {
  background: #f8f9fa;
  padding: 15px;
  margin-bottom: 15px;
  border-radius: 8px;
  border-left: 5px solid #007bff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.05);
}    
.cancel-btn {
  background-color: #dc3545;
  color: white;
  padding: 6px 10px;
  border: none;
  border-radius: 4px;
  margin-top: 8px;
  cursor: pointer;
}

.cancel-btn:hover {
  background-color: #c82333;
}
.badge {
  padding: 3px 8px;
  border-radius: 4px;
  font-size: 0.9em;
  font-weight: 600;
  display: inline-block;
}

.badge-cancelled {
  background-color: #f8d7da;
  color: #721c24;
}

.badge-active {
  background-color: #d4edda;
  color: #155724;
}
</style>
